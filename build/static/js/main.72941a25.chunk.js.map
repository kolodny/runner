{"version":3,"sources":["c25k.ts","app.tsx","index.tsx"],"names":["c25k","week1","steps","type","time","week2","console","log","App","React","useState","pulse","setPulse","ws","useMemo","WebSocket","onmessage","m","values","JSON","parse","data","connected","setConnected","setMPH","useCallback","mph","send","stringify","MPH","useEffect","onopen","intervals","totalTime","reduce","acc","cur","setTime","running","setRunning","interval","setInterval","t","clearInterval","done","currentActivityTime","currentStepIndex","length","currentStep","isRun","formatTime","Math","floor","slice","min","max","value","onChange","e","target","onClick","r","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.72941a25.chunk.js","sourcesContent":["// const times = <A extends any[]>(num: number, items: A) => {\n//   const ret = [...items];\n//   while (--num) {\n//     ret.push(...items);\n//   }\n//   return ret;\n// };\n\nexport const c25k: Record<\n  string,\n  Array<{\n    steps: Array<{\n      type: string;\n      time: number;\n    }>;\n  }>\n> = {\n  week1: [\n    {\n      steps: [\n        { type: 'warmup', time: 300 },\n\n        { type: 'run', time: 60 },\n        { type: 'walk', time: 60 },\n\n        { type: 'run', time: 60 },\n        { type: 'walk', time: 60 },\n\n        { type: 'run', time: 60 },\n        { type: 'walk', time: 60 },\n\n        { type: 'run', time: 60 },\n        { type: 'walk', time: 60 },\n\n        { type: 'run', time: 60 },\n        { type: 'walk', time: 60 },\n\n        { type: 'run', time: 60 },\n        { type: 'walk', time: 60 },\n\n        { type: 'run', time: 60 },\n        { type: 'walk', time: 60 },\n\n        { type: 'run', time: 60 },\n        { type: 'walk', time: 60 },\n\n        { type: 'run', time: 60 },\n        { type: 'walk', time: 60 },\n\n        { type: 'run', time: 60 },\n\n        { type: 'cooldown', time: 300 },\n      ],\n    },\n    {\n      steps: [\n        { type: 'warmup', time: 300 },\n\n        { type: 'run', time: 120 },\n        { type: 'walk', time: 240 },\n\n        { type: 'run', time: 120 },\n        { type: 'walk', time: 240 },\n\n        { type: 'run', time: 120 },\n        { type: 'walk', time: 240 },\n\n        { type: 'run', time: 120 },\n        { type: 'walk', time: 240 },\n\n        { type: 'run', time: 120 },\n\n        { type: 'cooldown', time: 300 },\n      ],\n    },\n    {\n      steps: [\n        { type: 'warmup', time: 300 },\n\n        { type: 'run', time: 120 },\n        { type: 'walk', time: 240 },\n\n        { type: 'run', time: 120 },\n        { type: 'walk', time: 240 },\n\n        { type: 'run', time: 120 },\n        { type: 'walk', time: 240 },\n\n        { type: 'run', time: 120 },\n        { type: 'walk', time: 240 },\n\n        { type: 'run', time: 120 },\n\n        { type: 'cooldown', time: 300 },\n      ],\n    },\n  ],\n  week2: [\n    {\n      steps: [\n        { type: 'warmup', time: 300 },\n\n        { type: 'run', time: 180 },\n        { type: 'walk', time: 180 },\n\n        { type: 'run', time: 180 },\n        { type: 'walk', time: 180 },\n\n        { type: 'run', time: 180 },\n        { type: 'walk', time: 180 },\n\n        { type: 'run', time: 180 },\n\n        { type: 'cooldown', time: 300 },\n      ],\n    },\n    {\n      steps: [\n        { type: 'warmup', time: 300 },\n\n        { type: 'run', time: 180 },\n        { type: 'walk', time: 180 },\n\n        { type: 'run', time: 180 },\n        { type: 'walk', time: 180 },\n\n        { type: 'run', time: 180 },\n        { type: 'walk', time: 180 },\n\n        { type: 'run', time: 180 },\n\n        { type: 'cooldown', time: 300 },\n      ],\n    },\n    {\n      steps: [\n        { type: 'warmup', time: 300 },\n\n        { type: 'run', time: 300 },\n        { type: 'walk', time: 180 },\n\n        { type: 'run', time: 300 },\n        { type: 'walk', time: 180 },\n\n        { type: 'run', time: 300 },\n\n        { type: 'cooldown', time: 300 },\n      ],\n    },\n  ],\n};\n","import React from 'react';\nimport { c25k } from './c25k';\n\nconst WS_ENDPOINT = `ws://192.168.86.85/control`;\n\nconsole.log(c25k);\n\nexport const App: React.FC = () => {\n  const [pulse, setPulse] = React.useState(0);\n  const ws = React.useMemo(() => new WebSocket(WS_ENDPOINT), []);\n  ws.onmessage = (m) => {\n    const values = JSON.parse(m.data)?.values;\n    if (values?.['Chest Pulse']) {\n      setPulse(+values['Chest Pulse'] ?? pulse);\n    }\n  };\n  const [connected, setConnected] = React.useState(false);\n  const setMPH = React.useCallback(\n    (mph: number) => {\n      try {\n        console.log('setting speed to', mph);\n        ws.send(JSON.stringify({ values: { MPH: `${mph}` }, type: 'set' }));\n      } catch {}\n    },\n    [ws]\n  );\n  React.useEffect(() => {\n    ws.onopen = () => setConnected(true);\n  });\n  const intervals = c25k.week2[2];\n  const totalTime = intervals.steps.reduce((acc, cur) => acc + cur.time, 0);\n  const [time, setTime] = React.useState(0);\n  const [running, setRunning] = React.useState(false);\n  React.useEffect(() => {\n    if (running) {\n      const interval = setInterval(() => {\n        setTime((t) => t + 1);\n      }, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [running, totalTime]);\n\n  const done = time >= totalTime;\n\n  React.useEffect(() => {\n    if (done) {\n      setRunning(false);\n    }\n  }, [done]);\n\n  let currentActivityTime = time;\n  let currentStepIndex = 0;\n  if (done) {\n    console.log('DONE');\n    currentStepIndex = intervals.steps.length - 1;\n    currentActivityTime = intervals.steps[currentStepIndex].time;\n  } else {\n    while (currentActivityTime >= intervals.steps[currentStepIndex].time) {\n      currentActivityTime -= intervals.steps[currentStepIndex].time;\n      currentStepIndex++;\n    }\n  }\n\n  const currentStep = intervals.steps[currentStepIndex];\n\n  React.useEffect(() => {\n    if (running) {\n      const isRun = currentStep.type === 'run';\n      setMPH(isRun ? 6 : 3);\n    } else {\n      setMPH(0);\n    }\n  }, [currentStep.type, running, setMPH]);\n\n  const formatTime = (t: number) =>\n    `${`0${Math.floor(t / 60)}`.slice(-2)}:${`0${Math.floor(t % 60)}`.slice(\n      -2\n    )}`;\n\n  return (\n    <div>\n      <div>{connected ? 'Connected' : 'Not Connected'}</div>\n      <div>\n        Status: {currentStep.type}\n        <div>Current Elapsed: {formatTime(currentActivityTime)}</div>\n        <div>\n          Current Remaining:{' '}\n          {formatTime(currentStep.time - currentActivityTime)}\n        </div>\n      </div>\n      <div>Total Elapsed {formatTime(time)}</div>\n      <div>Total Remaining {formatTime(totalTime - time)}</div>\n      <div>Pulse: {pulse}</div>\n      <input\n        type=\"range\"\n        min={0}\n        max={totalTime}\n        value={time}\n        onChange={(e) => setTime(+e.target.value)}\n      />\n      <div>\n        <button onClick={() => setRunning((r) => !done && !r)}>Toggle</button>\n        <button onClick={() => setRunning((r) => !done && true)}>Start</button>\n        <button onClick={() => setRunning((r) => !done && false)}>Stop</button>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}